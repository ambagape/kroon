<ion-header translucent>
  <ion-toolbar>
    <ion-buttons slot="end" class="ion-margin-end" (click)="logOut()">
      <img src="assets/logout.png" width="27px" height="27px" alt="">
    </ion-buttons>
    <ion-img cache=true src="assets/logo_transparent.png" class="ion-margin-start" slot="start" style="width: 30%"></ion-img>
  </ion-toolbar>
  <ion-toolbar color="primary">
    <ion-title class="ion-margin-start" slot="start">Gescande artikelen</ion-title>
    <ion-buttons slot="end" class="ion-margin-end">
      <img src="assets/androidsearch.png" width="27px" height="27px" (click)="showSearch = !showSearch">
    </ion-buttons>
  </ion-toolbar>
    <ion-searchbar
      *ngIf="showSearch"
      clearInput placeholder="Zoeken..." type="search" animated=true debounce=500 pattern="search" [(ngModel)]="search" (input)="onSearchChange($event)" (ionClear)="onInputClear($event)"></ion-searchbar>
</ion-header>

<ion-content fullscreen>
  <p *ngIf="cartItems.length === 0" style="text-align: center;">Scan een product om hem toe te voegen aan je winkelwagen</p>
  <ion-list *ngFor="let item of cartItems | filter:filterText">
    <ion-item-sliding>
      <ion-item lines="full" (click)="show(item)">
        <ion-thumbnail slot="start">
          <img src="{{ item?.product?.image }}">
        </ion-thumbnail>
        <ion-label class="ion-text-wrap">
          <h3 >{{ item.product.name }}</h3>
          <p class="smaller">Artikelnummer: {{ item.product.model }}</p>
          <p class="smaller"><span>Voorraad: {{ item.product.quantity }}</span> Verpakt per: {{ (item.product.jan ? item.product.jan : "1") }}</p>
        </ion-label>
        <ion-button fill="outline" slot="end" *ngIf="item.quantity">{{ item.quantity }}</ion-button>
      </ion-item>
      <ion-item-options side="end">
        <ion-item-option color="danger" (click)="delete(item)">
          <ion-icon size="small" slot="icon-only" name="trash" ></ion-icon>
        </ion-item-option>
      </ion-item-options>
    </ion-item-sliding>
  </ion-list>
</ion-content>
<ion-footer>
  <ion-note style="color:red">{{orderErrorMessage}}</ion-note>
  <ion-toolbar>
    <ion-button icon-start expand="full" class="ion-activatable ripple-parent" slot="start" color="dark"
      (click)="presentOrderModal()" style="width: 80%" [disabled]="cartItems.length < 1 || orderErrorMessage">
      <ion-icon name="cart" style="margin-right: 10px"></ion-icon>
      Bestellen
      <ion-ripple-effect></ion-ripple-effect>
    </ion-button>
    <ion-button icon-start expand="full" class="ion-activatable ripple-parent" slot="start" color="primary"
      (click)="openBarCodeScanner()" style="width: 20%">
      <ion-icon name="barcode-outline"></ion-icon>
      <ion-ripple-effect></ion-ripple-effect>
    </ion-button>
  </ion-toolbar>
</ion-footer>
